include "serialization.conf"

akka.persistence.query.journal.id = "cassandra-query-journal"
akka.test.timefactor = 10.0
akka.http.server.preview.enable-http2 = on

akka.http.server.request-timeout = 4888888 seconds
akka.http.max-open-requests = 512

hmda {
  loader.parallelism = 4
  currentNamespace = "default"
  currentNamespace = ${?PLATFORM_NAMESPACE}
  http {
    timeout = 38888888
  }
  actor {
    timeout = 38
  }

  cm_watch {
    timed_guards {
      name: "timed-guards"
      name: ${?TG_CM_NAME}
      ns: "default"
      ns: ${?PLATFORM_NAMESPACE}
    }
  }

  upload {
    lines {
      batch: 30
      batch: ${?UPLOAD_LINES_BATCH}
      parallelism: 1
      parallelism: ${?UPLOAD_LINES_PARALLELISM}
    }
  }

  email {
    publicDomains = "aol.com,aim.com,att.net,comcast.net,facebook.com,gmail.com,gmx.com,googlemail.com,google.com,hotmail.com,hotmail.co.uk,mac.com,me.com,makobj.store,mail.com,msn.com,live.com,sbcglobal.net,verizon.net,yahoo.com,yahoo.co.uk,email.com,fastmail.fm,games.com,gmx.net,hush.com,hushmail.com,icloud.com,iname.com,inbox.com,lavabit.com,love.com,outlook.com,pobox.com,protonmail.ch,protonmail.com,tutanota.de,tutanota.com,tutamail.com,tuta.io,keemail.me,rocketmail.com,safe-mail.net,wow.com,ygm.com,ymail.com,zoho.com,yandex.com,bellsouth.net,charter.net,cox.net,earthlink.net,juno.com,btinternet.com,virginmedia.com,blueyonder.co.uk,freeserve.co.uk,live.co.uk,ntlworld.com,o2.co.uk,orange.net,sky.com,talktalk.co.uk,tiscali.co.uk,virgin.net,wanadoo.co.uk,bt.com,sina.com,sina.cn,qq.com,naver.com,hanmail.net,daum.net,nate.com,yahoo.co.jp,yahoo.co.kr,yahoo.co.id,yahoo.co.in,yahoo.com.sg,yahoo.com.ph,163.com,yeah.net,126.com,21cn.com,aliyun.com,foxmail.com,hotmail.fr,live.fr,laposte.net,yahoo.fr,wanadoo.fr,orange.fr,gmx.fr,sfr.fr,neuf.fr,free.fr,gmx.de,hotmail.de,live.de,online.de,t-online.de,web.de,yahoo.de,libero.it,virgilio.it,hotmail.it,aol.it,tiscali.it,alice.it,live.it,yahoo.it,email.it,tin.it,poste.it,teletu.it,mail.ru,rambler.ru,yandex.ru,ya.ru,list.ru,hotmail.be,live.be,skynet.be,voo.be,tvcablenet.be,telenet.be,hotmail.com.ar,live.com.ar,yahoo.com.ar,fibertel.com.ar,speedy.com.ar,arnet.com.ar,yahoo.com.mx,live.com.mx,hotmail.es,hotmail.com.mx,prodigy.net.mx,yahoo.ca,hotmail.ca,bell.net,shaw.ca,sympatico.ca,rogers.com,yahoo.com.br,hotmail.com.br,outlook.com.br,uol.com.br,bol.com.br,terra.com.br,ig.com.br,itelefonica.com.br,r7.com,zipmail.com.br,globo.com,globomail.com,oi.com.br,microsoft.com,10minutemail.com,10minutemail.co.za,20minutemail.com,"
    publicDomains = ${?PUBLIC_EMAIL_DOMAINS}
  }

  rules {
    yearly-filing {
      years-allowed = "2018,2019,2020,2021,2022,2023,2024,2025"
      years-allowed = ${?RULES_YEARLY_FILING_YEARS_ALLOWED}
    }

    quarterly-filing {
      years-allowed = "2020,2021,2022,2023,2024"
      years-allowed = ${?RULES_QF_FILING_YEARS_ALLOWED}

      q1 {
        start = "April 01"
        start = ${?RULES_QF_Q1_START}

        end = "June 30"
        end = ${?RULES_QF_Q1_END}

        action_date_start = "January 01"
        action_date_start = ${?ACTION_DATE_Q1_START}

        action_date_end = "March 31"
        action_date_end = ${?ACTION_DATE_Q1_END}
      }

      q2 {
        start = "July 01"
        start = ${?RULES_QF_Q2_START}

        end = "September 30"
        end = ${?RULES_QF_Q2_END}

        action_date_start = "April 01"
        action_date_start = ${?ACTION_DATE_Q2_START}

        action_date_end = "June 30"
        action_date_end = ${?ACTION_DATE_Q2_END}
      }

      q3 {
        start = "October 01"
        start = ${?RULES_QF_Q3_START}

        end = "December 31"
        end = ${?RULES_QF_Q3_END}

        action_date_start = "July 01"
        action_date_start = ${?ACTION_DATE_Q3_START}

        action_date_end = "September 30"
        action_date_end = ${?ACTION_DATE_Q3_END}
      }
    }
  }

  filing {
    current = 2021
    current = ${?CURRENT_YEAR}

    parser.validValues.filename = "parserFieldValidValues.txt"
    parser.validValues.filename2024 = "parserFieldValidValues2024.txt"

    2018 {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2018EditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME}
      year = 2018
    }
    2019 {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2019EditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2019}
      year = 2019
    }
    2020 {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2020EditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2020}
      year = 2020
    }
    2020Quarter {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2020QuarterlyEditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2020_Q}
      year = 2020
    }
    2021 {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2021EditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2021}
      year = 2021
    }
    2021Quarter {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2021QuarterlyEditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2021_Q}
      year = 2021
    }
    2022Quarter {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2022QuarterlyEditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2022_Q}
      year = 2022
    }
    2022 {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2022EditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2022}
      year = 2022
    }
    2023Quarter {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2023QuarterlyEditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2023_Q}
      year = 2023
    }
    2023 {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2023EditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2023}
      year = 2023
    }
    2024Quarter {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2024QuarterlyEditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2024_Q}
      year = 2024
    }
    2024 {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2024EditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2024}
      year = 2024
    }
    2025Quarter {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2025QuarterlyEditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2025_Q}
      year = 2025
    }
    2025 {
      ts.length = 15
      lar.length = 110
      edits.descriptions.filename = "2025EditsDescriptions.txt"
      edits.descriptions.filename = ${?EDIT_DESCRIPTIONS_FILENAME_2025}
      year = 2025
    }
  }

  census {
    fairfield = "09190043800,09120061100,09120061300,09190230502,09190230501,09140110601,09140110602,09190035102,09190035101,09190210502,
    09190021701,09190021602,09190021502,09190211202,09190210202,09190210201,09190210102,09190210401,09190050302,09190021401,
    09190021402,09190021601,09190020101,09190021702,09190021501,09190211201,09190210101,09190020102,09190210501,09190210402,
    09190050301,09120257200,09190042600,09190042900,09120071000,09120071100,09120071200,09120071300,09120071400,09120071600,
    09190043400,09190043500,09120071900,09120072000,09120072200,09190043600,09120072300,09120072400,09120072500,09120072600,
    09120072700,09190043900,09190043700,09120072800,09190044000,09190044100,09190044200,09120073000,09120073200,09120073300,
    09120073400,09120073500,09120073700,09120073800,09120074300,09120074400,09120080100,09190021801,09190021802,09120080200,
    09120080500,09120080600,09120080700,09190044300,09190044400,09190044500,09190044600,09120090700,09140110100,09190200302,
    09190210300,09120080900,09190022201,09190022202,09190022101,09190022102,09190020302,09190020301,09120090300,09190010101,
    09190020600,09190021300,09190021100,09190035300,09120073600,09190050100,09120060500,09120100300,09190045300,09120061000,
    09120080800,09190030300,09190210702,09190210701,09190010400,09190050400,09120060700,09120060800,09120060900,09190211300,
    09190020200,09190020700,09190045101,09190050600,09120060600,09120072900,09190211100,09120074000,09140110301,09190211400,
    09190220100,09190220300,09190245300,09190021900,09190022000,09120061200,09120061500,09120061600,09120070100,09190022400,
    09190022300,09120070300,09120070400,09120070500,09120070600,09120070900,09120070200,09190205100,09190210900,09190042500,
    09120105100,09120060400,09190050500,09190010102,09120060200,09190240200,09190205300,09120081000,09190220200,09190230400,
    09190245400,09120100200,09120090100,09190055200,09190045400,09190035400,09190042800,09190245600,09190020400,09120090600,
    09190011300,09190230300,09190021000,09190030500,09120073900,09120081300,09190010800,09190020500,09190020800,09190043300,
    09120080400,09140110302,09190030200,09190045102,09190010900,09190011000,09120100100,09190205200,09190230100,09190257100,
    09190210800,09190210600,09140110500,09140110400,09190043100,09190245200,09140110202,09190045200,09190035200,09120060100,
    09190020900,09190200200,09190055100,09190200301,09120073100,09190211000,09120105200,09120060300,09120090500,09140110201,
    09190030100,09120090200,09190010300,09190050200,09120081100,09190042700,09190240100,09190043200,09120090400,09120081200,
    09190021200,09190230200,09190010201,09190010202,09190200100,09190245100,09190245500,09190011100,09190010500,09190010700,
    09190010600,09190011200,09190043000,09190030400,09120061400,09120072100"
    fields {
      2018 {
        filename = "ffiec_census_2018.txt"
        filename = ${?2018_CENSUS_FILENAME}
      }
      2019 {
        filename = "ffiec_census_2019.txt"
        filename = ${?2019_CENSUS_FILENAME}
      }
      2020 {
        filename = "ffiec_census_2020.txt"
        filename = ${?2020_CENSUS_FILENAME}
      }
      2021 {
        filename = "ffiec_census_2021.txt"
        filename = ${?2021_CENSUS_FILENAME}
      }
      2022 {
        filename = "ffiec_census_2022.txt"
        filename = ${?2022_CENSUS_FILENAME}
      }
      2023 {
        filename = "ffiec_census_2023.txt"
        filename = ${?2023_CENSUS_FILENAME}
      }
      2024 {
        filename = "ffiec_census_2024.txt"
        filename = ${?2024_CENSUS_FILENAME}
      }
      2025 {
        filename = "ffiec_census_2024.txt"
        filename = ${?2024_CENSUS_FILENAME}
      }
    }
  }

  countyLoanLimit {
    2018 {
      fields.filename = "FullCountyLoanLimitList2018.txt"
      fields.filename = ${?COUNTY_LOAN_LIMIT_FILENAME_2018}
    }
    2019 {
      fields.filename = "FullCountyLoanLimitList2019.txt"
      fields.filename = ${?COUNTY_LOAN_LIMIT_FILENAME_2019}
    }
    2020 {
      fields.filename = "FullCountyLoanLimitList2020.txt"
      fields.filename = ${?COUNTY_LOAN_LIMIT_FILENAME_2020}
    }
    2021 {
      fields.filename = "FullCountyLoanLimitList2021.txt"
      fields.filename = ${?COUNTY_LOAN_LIMIT_FILENAME_2021}
    }
    2022 {
      fields.filename = "FullCountyLoanLimitList2022.txt"
      fields.filename = ${?COUNTY_LOAN_LIMIT_FILENAME_2022}
    }
    2023 {
      fields.filename = "FullCountyLoanLimitList2023.txt"
      fields.filename = ${?COUNTY_LOAN_LIMIT_FILENAME_2023}
    }
    2024 {
      fields.filename = "FullCountyLoanLimitList2024.txt"
      fields.filename = ${?COUNTY_LOAN_LIMIT_FILENAME_2024}
    }
    2025 {
      fields.filename = "FullCountyLoanLimitList2025.txt"
      fields.filename = ${?COUNTY_LOAN_LIMIT_FILENAME_2024}
    }
  }

  kafka {
    ssl {
      truststore.location=""
      truststore.location = ${?KAFKA_SSL_LOCATION}
      truststore.password=""
      truststore.password = ${?KAFKA_SSL_PASSWORD}
      endpoint=""
      endpoint = ${?KAFKA_SSL_ENDPOINT}
    }
    topics {
      institutionTopic = "institution"
      institutionTopic = ${?KAFKA_INSTITUTIONS_TOPIC}
      signTopic = "hmda-sign"
      signTopic = ${?KAFKA_SIGN_TOPIC}
      modifiedLarTopic = "hmda-modified-lar"
      modifiedLarTopic = ${?KAFKA_MODIFIED_LAR_TOPIC}
      irsTopic = "hmda-irs"
      irsTopic = ${?KAFKA_IRS_TOPIC}
      analyticsTopic = "hmda-analytics"
      analyticsTopic = ${?KAFKA_ANALYTICS_TOPIC}
      disclosureTopic = "hmda-spark-disclosure"
      disclosureTopic = ${?KAFKA_DISCLOSURE_TOPIC}
      adTopic = "hmda-spark-ad"
      adTopic = ${?KAFKA_AD_TOPIC}
      emailTopic = "hmda-email"
      emailTopic = ${?KAFKA_EMAIL_TOPIC}
      adminEmailTopic = "admin-email"
      adminEmailTopic = ${?KAFKA_admin_EMAIL_TOPIC}
    }
    groups {
      emailGroup = "email-group"
      emailGroup = ${?KAFKA_EMAIL_GROUP}
      modifiedLarGroup = "modified-lar-group"
      modifiedLarGroup = ${?KAFKA_MODIFIED_LAR_GROUP}
      analyticsGroup = "analytics-group"
      analyticsGroup = ${?KAFKA_ANALYTICS_GROUP}
      irsGroup = "irs-group"
      irsGroup = ${?KAFKA_IRS_GROUP}
      institutionsGroup = "institutions-group"
      institutionsGroup = ${?KAFKA_INSTITUTIONS_GROUP}
      submissionErrorsGroup = "triggered-quality-edits-group"
      submissionErrorsGroup = ${?TRIGGERED_QUALITY_EDITS_GROUP}
    }
  }
}

dbconfig {
  host = "192.168.99.100"
  host = ${?PG_HOST}
  port = 5432
  port = ${?PG_PORT}
  database = "hmda"
  database = ${?PG_DATABASE}
  user = "postgres"
  user = ${?PG_USER}
  password = "postgres"
  password = ${?PG_PASSWORD}
  ssl = "require"
  ssl = ${?PG_SSL}
  additionalConfig="ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory"
  additionalConfig=${?PG_ADDCONFIG}
}

db {
  profile = "slick.jdbc.PostgresProfile$"

  db {
    profile = slick.jdbc.PostgresProfile
    url = "jdbc:postgresql://"${dbconfig.host}":"${dbconfig.port}"/"${dbconfig.database}"?user="${dbconfig.user}"&password="${dbconfig.password}"&sslmode="${dbconfig.ssl}"&"${dbconfig.additionalConfig}
    url = ${?JDBC_URL}
    numThreads = 4
    queueSize = 100
    connectionTimeout = 20000
    validationTimeout = 10000
  }
}

keycloak {
  realm = "hmda2"
  realmUrl = "https://ffiec.cfpb.gov/auth/realms/hmda2"
  realmUrl = ${?KEYCLOAK_REALM_URL}
  client.id = "hmda2-api"
  client.id = ${?KEYCLOAK_HMDA_API_CLIENT_ID}
  auth.server.url = "http://192.168.99.100:31752/auth/"
  auth.server.url = ${?KEYCLOAK_AUTH_URL}
  hmda.admin.role = "hmda-admin"
  hmda.admin.role = ${?KEYCLOAK_HMDA_ADMIN_ROLE}
  publicKey {
    modulus = ""
    modulus = ${?KEYCLOAK_PUBLIC_MODULUS}
    exponent = ""
    exponent = ${?KEYCLOAK_PUBLIC_EXPONENT}
  }
}

filter {
  bank-filter-list="BANK1LEIFORTEST12345,BANK3LEIFORTEST12345,BANK4LEIFORTEST12345,999999LE3ZOZXUS7W648,28133080042813308004,B90YWS6AFX2LGWOXJ1LD"
  bank-filter-list=${?BANK_FILTER_LIST}
  lou-filter-list = "4469000001AVO26P9X86,9504003253F6C21EE978,5493001KJTIIGC8Y1R12,39120001KULK7200U106,EVK05KS7XY1DEII3R011,029200067A7K6CH0H586,097900BEFH0000000217,315700LK78Z7C0WMIL03,959800R2X69K6Y6MX775,254900LXHEVKYGERER05,529900F6BNUR3RJ2WH29,52990034RLKT0WSOAM90,5299000J2N45DDNE4Y28,815600EAD78C57FCE690,815600F58F7382929F40,969500Q2MA9VBQ8BG884,48510000JZ17NWGUA510,724500A93Z8V1MJK5349,259400L3KBYEVNHEJF55,335800FVH4MOKZS9VH40,213800WAVVOPS85N2205,222100T6ICDIY8V4VX70,506700LOLO7M6V0E4247,743700OO8O2N3TQKJC81,254900PMALKJRL1YGQ18,558600FNC30A8J9EGQ54,378900F4A0A690EA6735,635400DZBUIMTBCXGA12,529900T8BM49AURSDO55,894500IIP432AHQ64V02,7478000050A040C0D041,789000TVSB96MCOKSB52,253400M18U5TB02TW421,300300KDIZ11PV2GH547,353800279ADEFGKNTV65,9884008RRMX1X5HV6625"
  lou-filter-list = ${?LOU_FILTER_LIST}
}

psv {
  fieldRegex = "(\\||^)?([^|]+)(\\||$)?"
  fieldRegex = ${?PSV_FIELD_REGEX}
  quotedReplacement = "$1\"$2\"$3"
  quotedReplacement = ${?PSV_FIELD_QUOTED_REPLACEMENT}
}